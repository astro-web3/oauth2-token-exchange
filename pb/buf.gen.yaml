version: v2

managed:
  enabled: true
  override:
    - file_option: go_package_prefix
      module: buf.build/oauth2-token-exchange/authz
      value: github.com/astro-web3/oauth2-token-exchange/pb/gen/go

plugins:
  - remote: buf.build/protocolbuffers/go:v1.36.10
    out: gen/go
    opt:
      - paths=source_relative

  - remote: buf.build/connectrpc/go:v1.19.1
    out: gen/go
    opt:
      - paths=source_relative

  - remote: buf.build/grpc-ecosystem/openapiv2:v2.27.3
    out: gen/openapi
    opt:
      - allow_merge=true
      - include_package_in_tags=true
      - fqn_for_openapi_name=true
      - disable_default_errors=true
      - enums_as_ints=true
      - output_format=yaml
      - preserve_rpc_order=true
      - generate_unbound_methods=true
      - json_names_for_fields=false
      - merge_file_name=oauth2-token-exchange